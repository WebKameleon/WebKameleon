

{with:widgetData}


<form id="merlin_form" method="post" validate="1">
    {include:_widget.header.html}
    <h1><a href="{data.form.alternateLink}" target="_blank" id="edit_link">{translate.Merlin}</a></h1>

    <div class="edit_box">
        <div class="label">{translate.Login}</div>
        <div class="value">
            <input type="text" name="{name}[login]" value="{data.login}" size="20" />
        </div>
    </div>
    
    <div class="edit_box">
        <div class="label">{translate.Password}</div>
        <div class="value">
            <input type="password" name="{name}[pass]" value="{data.pass}" size="20" />
        </div>
    </div>     
    
    <div class="edit_box">
        <div class="label" style="min-height: 250px">{translate.Operator}</div>
        <div class="value">
            
            {loop:data.operators}
            
            [<input type="checkbox" name="{name}[operator][{loop}]" value="{loop}" {if:data.operator.$loop}checked{endif:data.operator.$loop}/>
            {loop}]
            {if:__index__}
            {if:!__index__|%12}
            <br/>
            {endif:!__index__|%12}
            {endif:__index__}
            {endloop:data.operators}
            
        </div>
    </div>
    
    {if:name=merlin/search}
    
    <div class="edit_box">
        <div class="label" style="min-height: 250px">{translate.Search}</div>
        <div class="value">
            <p>
                <input type="checkbox" name="{name}[xsearch][destination]" value="destination" {if:data.xsearch.destination}checked{endif:data.xsearch.destination}/>
                {translate.Destination}
            </p>
            <p>
                <input type="checkbox" name="{name}[xsearch][date]" value="date" {if:data.xsearch.date}checked{endif:data.xsearch.date}/>
                {translate.Date}
            </p>
            <p>
                <input type="checkbox" name="{name}[xsearch][departure]" value="departure" {if:data.xsearch.departure}checked{endif:data.xsearch.departure}/>
                {translate.Departure}
            </p>            
            <p>
                <input type="checkbox" name="{name}[xsearch][hotel]" value="hotel" {if:data.xsearch.hotel}checked{endif:data.xsearch.hotel}/>
                {translate.Hotel}
            </p>
            <p>
                <input type="checkbox" name="{name}[xsearch][pax]" value="pax" {if:data.xsearch.pax}checked{endif:data.xsearch.pax}/>
                {translate.Pax}
            </p>            
        </div>
    </div>    
    
    {endif:name=merlin/search}
    
    {if:name=merlin/results}
    <div class="edit_box">
        <div class="label">{translate.Offers per page}</div>
        <div class="value">
            <input type="text" name="td[size]" value="{webtd.size?10}" size="4" />
        </div>
    </div>
    
    
    <div class="edit_box">
        <div class="label">{translate.Results}</div>
        <div class="value">
            
            <input type="radio" id="type_0" name="{name}[type]" value="0" {if:!data.type}checked{endif:!data.type}/>
            <label style="cursor: pointer" for="type_0">{translate.Groups}</label>
            <br/>
            
            <input type="radio" id="type_1" name="{name}[type]" value="1" {if:data.type=1}checked{endif:data.type=1}/>
            <label style="cursor: pointer" for="type_1">{translate.Offers}</label>
            <br/>            
        </div>
    </div> 
    {endif:name=merlin/results}
    
</form>


{loop:data.dbg}
{debug.__item__.#.blue.$__loop__}
{endloop:data.dbg}

<br/>
<br/><br/>

<script type="text/javascript">
    function SaveChanges()
    {
        jQueryKam("#merlin_form").submit();
        return false;
    }

    

</script>



{endwith:widgetData}